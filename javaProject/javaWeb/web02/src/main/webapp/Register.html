<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>javaScript-2</title>
  <style>
    form {
      display: flex;

      align-items: center;
      height: 100vh;
      flex-direction: column;
    }
    input{
      height: 30px;
    }
    #submit{
      height: 34px;
      width: 109px;
      color: #fff;
      cursor: pointer;
      text-align: center;
      border: 0;
      background:#55aaff;
      line-height: 32px;
    }

  </style>
</head>
<body>
<form action="http://localhost:8080/web02_war/RegisterServlet" method="post" onsubmit="return validateForm()">
  <p>
    <label  for="username">用户名&nbsp;</label>
    <input onfocus="username_onFocus()" onBlur="username_loseFocus()" type="text" name="username" id="username" class="input" autocomplete="off" value="" placeholder="请设置用户名">
    <label style="position: fixed;display: none;color:red;" id="userNameError" >用户名以字母,数字,或者下划线开头,最少4位,最多10位</label>
  </p>

  <p>
    <label for="phone">手机号&nbsp;</label>
    <input onfocus="phone_onFocus()" onBlur="phone_loseFocus()" type="text" name="phone" id="phone" class="input" autocomplete="off" value="" placeholder="可用于登录和找回密码">
    <label style="position: fixed;display: none;color:red;" id="phoneError" >数字13,14,15,17,19开头，且为11位数字</label>
  </p>

  <p>
    <label for="password">密&emsp;码&nbsp;</label>
    <input onfocus="password_onFocus()" onBlur="password_loseFocus()" type="password" name="password" id="password" class="input" autocomplete="off" value="" placeholder="请设置登录密码">
    <label style="position: fixed;display: none;color:red;" id="passwordError" >由字母,数字或者标点符号构成,必须包含大写以及小写字母至少一个</label>
  </p>

  <p>
    <input type="submit" id="submit" value="注册" >
  </p>
</form>


<script>
  var usernameReg = /^\w{4,10}$/;
  var phoneReg    = /^(13|14|15|17|19)\d{9}$/;
  var passwordReg = /^(?=.*[a-z])(?=.*[A-Z])[a-zA-Z\d!@#$%^&*()\-+]+$/;
  function username_onFocus() {
    document.getElementById("userNameError").style.display = 'none';
  }
  function username_loseFocus() {
    var usernameInput = document.getElementById("username");
    var username = usernameInput.value.trim();
    if(!usernameReg.test(username)) {
      document.getElementById("userNameError").style.display = 'inline-block';
    }
  }

  function phone_onFocus() {
    document.getElementById("phoneError").style.display = 'none';
  }
  function phone_loseFocus() {
    var phoneInput = document.getElementById("phone");
    var phone = phoneInput.value.trim();
    if(!phoneReg.test(phone)) {
      document.getElementById("phoneError").style.display = 'inline-block';
    }
  }

  function password_onFocus() {
    document.getElementById("passwordError").style.display = 'none';
  }
  function password_loseFocus() {
    var passwordInput = document.getElementById("password");
    var password = passwordInput.value.trim();
    if(!passwordReg.test(password)) {
      document.getElementById("passwordError").style.display = 'inline-block';
    }
  }

  function validateForm() {
    var username = document.getElementById('username').value.trim();
    var phone = document.getElementById('phone').value.trim();
    var password = document.getElementById('password').value.trim();

    if (!usernameReg.test(username)) {
      document.getElementById("userNameError").style.display = 'inline-block';
      return false;
    }

    if (!phoneReg.test(phone)) {
      document.getElementById("phoneError").style.display = 'inline-block';
      return false;
    }

    if (!passwordReg.test(password)) {
      document.getElementById("passwordError").style.display = 'inline-block';
      return false;
    }

    return true; // 如果通过所有验证，返回 true
  }


</script>
</body>
</html>
